drop table if exists User;
drop table if exists Authtoken;
drop table if exists Recipe;
drop table if exists ItemList;
drop table if exists Category;
drop table if exists Item;

create table User
(
	id varchar(255) not null primary key,
	username varchar(255) not null,
	password varchar(255) not null
	
);

create table Authtoken
(
    token varchar(255) not null primary key,
    userID varchar(255) not null,
    foreign key(userID) references User(id)
);

create table Recipe
(
	id varchar(255) not null primary key,
	name varchar(255) not null,
	owner varchar(255) not null,
	description varchar(2047),
	ingredients varchar(255),
	steps varchar(255),
	foreign key(owner) references User(id),
	foreign key(ingredients) references ItemList(id) on delete set null,
	foreign key(steps) references ItemList(id) on delete set null
);

create table ItemList
(
	id varchar(255) not null primary key,
	name varchar(255) not null,
	owner varchar(255) not null,
	foreign key(owner) references User(id)
);

create table Category
(
	id varchar(255) not null primary key,
	name varchar(255) not null,
	owner varchar(255) not null,
	parentList varchar(255) not null,
	foreign key(owner) references User(id),
	foreign key(parentList) references ItemList(id)
);

create table Item
(
	id varchar(255) not null primary key,
	name varchar(255) not null,
	owner varchar(255) not null,
	parentList varchar(255) not null,
	itemCategory varchar(255),
	favorited boolean not null,
	completed boolean not null,
	foreign key(owner) references User(id),
	foreign key(parentList) references ItemList(id),
	foreign key(itemCategory) references Category(id) on delete set null
);